# Maintainer: Kitty Panics

pkgname=virtualbox-sup
pkgver=7.0.12
pkgrel=1
url="https://download.virtualbox.org/virtualbox/${pkgver}/"
pkgdesc='Supplement the missing files of VirtualBox.'
arch=('x86_64')
license=('GPL3')
provides=("${pkgname}")
conflicts=("${pkgname}")
depends=('virtualbox')
makedepends=('p7zip')
source=("vbox.run::${url}/VirtualBox-${pkgver}-159484-Linux_amd64.run")
sha256sums=('SKIP')

prepare() {
    7z x -aos vbox.run -o"${srcdir}"
    bsdtar -xf "${srcdir}"/VirtualBox.tar.bz2 -C "${srcdir}"
}

package() {
    # mkdir
    install -dm755 "${pkgdir}"/usr/share/"${pkgname%%-*}"/UnattendedTemplates
    install -dm755 "${pkgdir}"/usr/share/doc/"${pkgname%%-*}"

    # pkg files
    install -Dm644 "${srcdir}"/UnattendedTemplates/* \
                -t "${pkgdir}"/usr/share/virtualbox/UnattendedTemplates/

    # doc
    install -Dm644 "${srcdir}"/UserManual.* \
                -t "${pkgdir}"/usr/share/doc/"${pkgname%%-*}"/
}
